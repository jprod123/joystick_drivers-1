sudo: required
dist: trusty
services:
- docker
language: generic
compiler:
- gcc
notifications:
  email:
    recipients:
    - gm130s@gmail.com
env:
  matrix:
  - ROS_DISTRO="indigo" ROS_REPOSITORY_PATH=http://packages.ros.org/ros/ubuntu
  - ROS_DISTRO="indigo" ROS_REPOSITORY_PATH=http://packages.ros.org/ros-shadow-fixed/ubuntu
  - ROS_DISTRO="indigo" PRERELEASE=true
  - ROS_DISTRO="kinetic"  ROS_REPOSITORY_PATH=http://packages.ros.org/ros/ubuntu
  - ROS_DISTRO="kinetic"  ROS_REPOSITORY_PATH=http://packages.ros.org/ros-shadow-fixed/ubuntu
  - ROS_DISTRO="kinetic"  PRERELEASE=true
  - ROS_DISTRO="lunar"  ROS_REPOSITORY_PATH=http://packages.ros.org/ros/ubuntu
  - ROS_DISTRO="lunar"  ROS_REPOSITORY_PATH=http://packages.ros.org/ros-shadow-fixed/ubuntu
  - ROS_DISTRO="lunar"  PRERELEASE=true
matrix:
  allow_failures:
  - env: ROS_DISTRO="indigo" PRERELEASE=true
  - env: ROS_DISTRO="jade"   ROS_REPOSITORY_PATH=http://packages.ros.org/ros/ubuntu
  - env: ROS_DISTRO="jade"   ROS_REPOSITORY_PATH=http://packages.ros.org/ros-shadow-fixed/ubuntu
  - env: ROS_DISTRO="jade"   PRERELEASE=true
  - env: ROS_DISTRO="kinetic"  PRERELEASE=true
  - env: ROS_DISTRO="lunar"  PRERELEASE=true
install:
- git clone https://github.com/ros-industrial/industrial_ci.git .ci_config
script:
- .ci_config/travis.sh
after_success:
- openssl aes-256-cbc -K $encrypted_334a091eeb82_key -iv $encrypted_334a091eeb82_iv
  -in .snapcraft/travis_snapcraft.cfg -out .snapcraft/snapcraft.cfg -d
deploy:
  'on':
    branch: master
  provider: script
  script: docker run -v $(pwd):$(pwd) -t ubuntu:xenial sh -c "apt update -qq && apt
    install snapcraft -y && cd $(pwd) && snapcraft && snapcraft push *.snap --release
    edge"
  skip_cleanup: true
